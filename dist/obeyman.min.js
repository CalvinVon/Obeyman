!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Obeyman=e():t.Obeyman=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=3)}([function(t,e,r){"use strict";var n={Number:function(t){return new a("number",t._optional,t.key,t._value)},String:function(t){return new a("string",t._optional,t.key,t._value)},Boolean:function(t){return new a("boolean",t._optional,t.key,t._value)},Object:function(t){return new a("object",t._optional,t.key)},Array:function(t){return new a("array",t._optional,t.key)},Length:function(t){return new u(t._optional,t.key,t._length)},Min:function(t){return new l(t._optional,t.key,t._min)},Max:function(t){return new s(t._optional,t.key,t._max)},Allow:function(t){return new c(t._allows)}};function i(t){return Object.prototype.toString.call(t).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function o(t,e,r){this.name="validator",this.field=e||"",this.value=r,this.optional=t||!1,this.error=""}function a(t,e,r,n){o.call(this,e,r,n),this.name=t+" validator",this.validate=function(r){return!(!e||"undefined"!==i(r))||i(r)===t};var a={},u="this field should be "+t;r?a[r]=u:a=u,this.error=a}function u(t,e,r){o.call(this,t,e),this.name="length validator";var n="length should be "+(this.length=r),a={};e?a[e]=n:a=n,this.error=a,this.validate=function(e){if(t&&"undefined"===i(e))return!0;switch(i(e)){case"string":case"array":return e.length===r;default:return!0}}}function l(t,e,r){o.call(this,t,e),this.name="min validator";var n="should be more than "+(this.min=r),a={};e?a[e]=n:a=n,this.error=a,this.validate=function(e){if(t&&"undefined"===i(e))return!0;switch(i(e)){case"string":case"array":return n="length "+n,e.length>=r;case"number":return r<=e}}}function s(t,e,r){o.call(this,t,e),this.name="max validator";var n="length should be less than "+(this.max=r),a={};e?a[e]=n:a=n,this.error=a,this.validate=function(e){if(t&&"undefined"===i(e))return!0;switch(i(e)){case"string":case"array":return e.length<=r;case"number":return e<=r}}}function c(t){o.call(this),this.name="allow validator",this.validate=function(e){return"array"!==i(t)&&(t=[]),t.some(function(t){return t===e})}}o.prototype.validate=function(t){return!0},a.prototype=new o,u.prototype=new o,l.prototype=new o,s.prototype=new o,c.prototype=new o,e.VALIDATORS=n,e.getType=i,e.Validator=o,e.TypeValidator=a,e.LengthValidator=u,e.MinValidator=l,e.MaxValidator=s,e.AllowValidator=c},function(t,e,r){"use strict";var n=r(0).VALIDATORS,i=r(0).getType,o=r(2).MODE;function a(){this.mode=o.NORMAL,this._validatorFactories=[],this._type="any",this._type_cast=void 0,this._required=!1,this._optional=!1,this._length=void 0,this._children=null,this._allows=[]}function u(){a.call(this),this._type="string"}function l(){a.call(this),this._type="array"}function s(){a.call(this),this._type="object"}a.prototype.required=function(){return this._required=!0,this},a.prototype.optional=function(){return this._value||(this._required=!1,this._optional=!0),this},a.prototype.len=function(t){return this._length=t,this._validatorFactories.push(n.Length),this},a.prototype.min=function(t){return this._min=t,this._validatorFactories.push(n.Min),this},a.prototype.max=function(t){return this._max=t,this._validatorFactories.push(n.Max),this},a.prototype.allow=function(){var t=Array.prototype.slice.call(arguments);return this.mode=o.ALLOW,"array"===i(t[0])?this._allows=this._allows.concat(t[0]):this._allows=this._allows.concat(t),this._validatorFactories.push(n.Allow),this},(u.prototype=new a).alphaNumber=function(){return this._type_cast="number",this},(l.prototype=new a).items=function(){var t=Array.prototype.slice.call(arguments);return"array"===i(t[0])?this._items=t[0]:this._items=t,this},(s.prototype=new a).keys=function(t){return this._children=t,this},e.Schema=a,e.StringSchema=u,e.ArraySchema=l,e.ObjectSchema=s},function(t,e,r){"use strict";t.exports={TYPE:{number:0,boolean:1,string:2,object:3,array:4,function:5,regexp:6,null:7,undefined:8},MODE:{NORMAL:0,ALLOW:1}}},function(t,e,r){"use strict";var n=r(1).Schema,i=r(1).ObjectSchema,o=r(1).StringSchema,a=r(1).ArraySchema,u=r(0).Validator,l=r(0).TypeValidator,s=r(0).VALIDATORS,c=r(0).getType,h=r(2),f={internal:{TYPE:h.TYPE,VALIDATORS:s,Validator:u,TypeValidator:l,Schema:n},validate:function(t,e,r){var n=function(t,e){e.valid=!1;var r=[];if(e._required&&void 0===t){var n={};return e.key?n[e.key]="is required":n="this field is required",r.push(n),r}if(e._validatorFactories=e._validatorFactories.sort(function(t,e){return"Allow"===t.name?"Allow"===e.name?0:-1:1}),e._validatorFactories.forEach(function(n){if(!e.valid){var i=n(e);i.validate(t)?"Allow"===n.name&&e.mode===h.MODE.ALLOW&&(e.valid=!0):i.error&&r.push(i.error)}}),void 0!==e._value&&e._value!==t)return n={},e.key?n[e.key]="is not equal to "+e._value:n="this field is not equal to "+e._value,r.push(n),r;var i=e._children;i&&t&&Object.keys(i).forEach(function(n){var o=t[n],a=i[n];a.is_child=!0,a.parent_key=e.key,e.key?a.key=[e.key,n].join("."):a.key=n;var u=f.validate(o,a);u&&(r=r.concat(u))});var o=e._items;if(o&&t&&"array"===e._type){var a=o.filter(function(t){return t._required}).length;if(a>t.length){n={};var u="required items can not less than "+a;e.key?n[e.key]=u:n=u,r.push(n)}else{var l=[];t.map(function(t,e){var r=o.some(function(e){return!f.validate(t,e)});if(r)return r;l.push(e)}).every(function(t){return t})||(n={},u="items can`t satisfy all the conditions. They are: "+l.map(function(t){return(e.key||"this")+"["+t+"]"}).join(", "),e.key?n[e.key]=u:n=u,r.push(n))}}return r.length?r:null}(t,e);if("function"===c(r)){var i=null;if(n){var o="Schema validate failed, ";"object"===c(n[0])?n.forEach(function(t){for(var e in t)o+="\n    at field `"+e+"`, "+t[e]+";"}):o=n[0],o+="\n",i=new Error(o)}r.call(null,i,n)}return n},any:function(){var t=new n;return t._type="any",t},string:function(t){var e=new o;return e._validatorFactories.push(s.String),e._type="string",void 0!==(e._value=t)&&(e._required=!0,e._optional=!1),e},boolean:function(t){var e=new n;return e._validatorFactories.push(s.Boolean),e._type="boolean",void 0!==(e._value=t)&&(e._required=!0,e._optional=!1),e},number:function(t){var e=new n;return e._validatorFactories.push(s.Number),e._type="number",void 0!==(e._value=t)&&(e._required=!0,e._optional=!1),e},array:function(){var t=new a;return t._validatorFactories.push(s.Array),t._type="array",t},object:function(){var t=new i;return t._validatorFactories.push(s.Object),t._type="object",t}};t.exports=f}])});